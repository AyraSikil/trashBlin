<html>
<head>
<title>Crossword.java</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #0033b3;}
.s1 { color: #080808;}
.s2 { color: #8c8c8c; font-style: italic;}
.s3 { color: #067d17;}
.s4 { color: #1750eb;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
Crossword.java</font>
</center></td></tr></table>
<pre><span class="s0">package </span><span class="s1">com.javarush.task.task20.task2027;</span>

<span class="s0">import </span><span class="s1">java.util.ArrayList;</span>
<span class="s0">import </span><span class="s1">java.util.List;</span>

<span class="s2">/*  
Кроссворд 
*/</span>

<span class="s0">public class </span><span class="s1">Crossword {</span>
    <span class="s0">public static void </span><span class="s1">main(String[] args) {</span>
        <span class="s0">int</span><span class="s1">[][] crossword = </span><span class="s0">new int</span><span class="s1">[][]{</span>
                <span class="s1">{</span><span class="s3">'f'</span><span class="s1">, </span><span class="s3">'d'</span><span class="s1">, </span><span class="s3">'e'</span><span class="s1">, </span><span class="s3">'r'</span><span class="s1">, </span><span class="s3">'l'</span><span class="s1">, </span><span class="s3">'k'</span><span class="s1">},</span>
                <span class="s1">{</span><span class="s3">'u'</span><span class="s1">, </span><span class="s3">'s'</span><span class="s1">, </span><span class="s3">'a'</span><span class="s1">, </span><span class="s3">'m'</span><span class="s1">, </span><span class="s3">'e'</span><span class="s1">, </span><span class="s3">'o'</span><span class="s1">},</span>
                <span class="s1">{</span><span class="s3">'l'</span><span class="s1">, </span><span class="s3">'n'</span><span class="s1">, </span><span class="s3">'g'</span><span class="s1">, </span><span class="s3">'r'</span><span class="s1">, </span><span class="s3">'o'</span><span class="s1">, </span><span class="s3">'v'</span><span class="s1">},</span>
                <span class="s1">{</span><span class="s3">'m'</span><span class="s1">, </span><span class="s3">'l'</span><span class="s1">, </span><span class="s3">'p'</span><span class="s1">, </span><span class="s3">'r'</span><span class="s1">, </span><span class="s3">'r'</span><span class="s1">, </span><span class="s3">'h'</span><span class="s1">},</span>
                <span class="s1">{</span><span class="s3">'p'</span><span class="s1">, </span><span class="s3">'o'</span><span class="s1">, </span><span class="s3">'e'</span><span class="s1">, </span><span class="s3">'n'</span><span class="s1">, </span><span class="s3">'j'</span><span class="s1">, </span><span class="s3">'j'</span><span class="s1">}</span>
        <span class="s1">};</span>
        <span class="s1">detectAllWords(crossword, </span><span class="s3">&quot;home&quot;</span><span class="s1">, </span><span class="s3">&quot;same&quot;</span><span class="s1">);</span>
        <span class="s2">/* 
Ожидаемый результат 
home - (5, 3) - (2, 0) 
same - (1, 1) - (4, 1) 
         */</span>
    <span class="s1">}</span>

    <span class="s0">public static </span><span class="s1">List&lt;Word&gt; detectAllWords(</span><span class="s0">int</span><span class="s1">[][] crossword, String... words) {</span>
        <span class="s1">List&lt;Word&gt; result = </span><span class="s0">new </span><span class="s1">ArrayList&lt;&gt;();</span>
        <span class="s1">Word cache;</span>

        <span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">i = </span><span class="s4">0</span><span class="s1">; i &lt; crossword.length; i++) {</span>
            <span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">j = </span><span class="s4">0</span><span class="s1">; j &lt; crossword[</span><span class="s4">0</span><span class="s1">].length; j++) {</span>
                <span class="s0">if </span><span class="s1">(checkChar((</span><span class="s0">char</span><span class="s1">) crossword[i][j], words))</span>
                    <span class="s0">if </span><span class="s1">((cache = check(i, j, crossword, words)) != </span><span class="s0">null</span><span class="s1">)</span>
                        <span class="s1">result.add(cache);</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">for </span><span class="s1">(Word word : result) {</span>
            <span class="s1">System.out.println(word);</span>
        <span class="s1">}</span>

        <span class="s0">return </span><span class="s1">result;</span>
    <span class="s1">}</span>

    <span class="s0">private static boolean </span><span class="s1">checkChar(</span><span class="s0">char </span><span class="s1">c, String... words){</span>
        <span class="s2">//just checks whether char in current tile is used in words we are looking for</span>
        <span class="s0">for </span><span class="s1">(String word : words){</span>
            <span class="s0">if </span><span class="s1">(word.startsWith(</span><span class="s3">&quot;&quot;</span><span class="s1">+c))</span>
                <span class="s0">return true</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s0">return false</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">private static </span><span class="s1">Word check(</span><span class="s0">int </span><span class="s1">iOrig, </span><span class="s0">int </span><span class="s1">jOrig, </span><span class="s0">int</span><span class="s1">[][] crossword, String... words){</span>
        <span class="s1">Word cache;</span>

        <span class="s0">for </span><span class="s1">(String word : words){</span>
            <span class="s0">int </span><span class="s1">c = word.getBytes()[</span><span class="s4">1</span><span class="s1">];</span>
            <span class="s0">int </span><span class="s1">length = word.length() - </span><span class="s4">1</span><span class="s1">;</span>
            <span class="s0">if </span><span class="s1">(word.startsWith(</span><span class="s3">&quot;&quot;</span><span class="s1">+(</span><span class="s0">char</span><span class="s1">) crossword[iOrig][jOrig])){</span>
                <span class="s2">// potryasayusche vsratiy algoritm proverki</span>
                <span class="s2">// checks direction, in which second char is placed, sending that direction to method checkWord</span>
                <span class="s2">// checking begins only if there are more tiles to search, than the word's length</span>
                <span class="s2">// horisontal</span>
                <span class="s0">if </span><span class="s1">( (jOrig + length) &lt;= crossword[</span><span class="s4">0</span><span class="s1">].length &amp;&amp; crossword[iOrig][jOrig+</span><span class="s4">1</span><span class="s1">] == c )</span>
                    <span class="s0">if </span><span class="s1">((cache = checkWord(</span><span class="s4">1</span><span class="s1">,</span><span class="s4">0</span><span class="s1">,iOrig,jOrig,crossword,word)) != </span><span class="s0">null</span><span class="s1">)</span>
                        <span class="s0">return </span><span class="s1">cache;</span>
                <span class="s0">if </span><span class="s1">( (jOrig - length) &gt;= </span><span class="s4">0 </span><span class="s1">&amp;&amp; crossword[iOrig][jOrig-</span><span class="s4">1</span><span class="s1">] == c )</span>
                    <span class="s0">if </span><span class="s1">((cache = checkWord(-</span><span class="s4">1</span><span class="s1">,</span><span class="s4">0</span><span class="s1">,iOrig,jOrig,crossword,word)) != </span><span class="s0">null</span><span class="s1">)</span>
                        <span class="s0">return </span><span class="s1">cache;</span>
                <span class="s2">// vertical</span>
                <span class="s0">if </span><span class="s1">( (iOrig + length) &lt; crossword.length &amp;&amp; crossword[iOrig+</span><span class="s4">1</span><span class="s1">][jOrig] == c )</span>
                    <span class="s0">if </span><span class="s1">((cache = checkWord(</span><span class="s4">0</span><span class="s1">,</span><span class="s4">1</span><span class="s1">,iOrig,jOrig,crossword,word)) != </span><span class="s0">null</span><span class="s1">)</span>
                        <span class="s0">return </span><span class="s1">cache;</span>
                <span class="s0">if </span><span class="s1">( (iOrig - length) &gt;= </span><span class="s4">0 </span><span class="s1">&amp;&amp; crossword[iOrig-</span><span class="s4">1</span><span class="s1">][jOrig] == c )</span>
                    <span class="s0">if </span><span class="s1">((cache = checkWord(</span><span class="s4">0</span><span class="s1">,-</span><span class="s4">1</span><span class="s1">,iOrig,jOrig,crossword,word)) != </span><span class="s0">null</span><span class="s1">)</span>
                        <span class="s0">return </span><span class="s1">cache;</span>
                <span class="s2">// diagonal</span>
                <span class="s0">if </span><span class="s1">( (jOrig + length) &lt;= crossword[</span><span class="s4">0</span><span class="s1">].length &amp;&amp; (iOrig + length) &lt; crossword.length &amp;&amp;</span>
                        <span class="s1">crossword[iOrig+</span><span class="s4">1</span><span class="s1">][jOrig+</span><span class="s4">1</span><span class="s1">] == c )</span>
                    <span class="s0">if </span><span class="s1">((cache = checkWord(</span><span class="s4">1</span><span class="s1">,</span><span class="s4">1</span><span class="s1">,iOrig,jOrig,crossword,word)) != </span><span class="s0">null</span><span class="s1">)</span>
                        <span class="s0">return </span><span class="s1">cache;</span>
                <span class="s0">if </span><span class="s1">( (jOrig - length) &gt;= </span><span class="s4">0 </span><span class="s1">&amp;&amp; (iOrig - length) &gt;= </span><span class="s4">0 </span><span class="s1">&amp;&amp;</span>
                        <span class="s1">crossword[iOrig-</span><span class="s4">1</span><span class="s1">][jOrig-</span><span class="s4">1</span><span class="s1">] == c )</span>
                    <span class="s0">if </span><span class="s1">((cache = checkWord(-</span><span class="s4">1</span><span class="s1">,-</span><span class="s4">1</span><span class="s1">,iOrig,jOrig,crossword,word)) != </span><span class="s0">null</span><span class="s1">)</span>
                        <span class="s0">return </span><span class="s1">cache;</span>
                <span class="s0">if </span><span class="s1">( (jOrig + length) &lt;= crossword[</span><span class="s4">0</span><span class="s1">].length &amp;&amp; (iOrig - length) &gt;= </span><span class="s4">0 </span><span class="s1">&amp;&amp;</span>
                        <span class="s1">crossword[iOrig-</span><span class="s4">1</span><span class="s1">][jOrig+</span><span class="s4">1</span><span class="s1">] == c )</span>
                    <span class="s0">if </span><span class="s1">((cache = checkWord(</span><span class="s4">1</span><span class="s1">,-</span><span class="s4">1</span><span class="s1">,iOrig,jOrig,crossword,word)) != </span><span class="s0">null</span><span class="s1">)</span>
                        <span class="s0">return </span><span class="s1">cache;</span>
                <span class="s0">if </span><span class="s1">( (jOrig - length) &gt;= </span><span class="s4">0 </span><span class="s1">&amp;&amp; (iOrig + length) &lt;= crossword.length-</span><span class="s4">1 </span><span class="s1">&amp;&amp;</span>
                        <span class="s1">crossword[iOrig+</span><span class="s4">1</span><span class="s1">][jOrig-</span><span class="s4">1</span><span class="s1">] == c )</span>
                    <span class="s0">if </span><span class="s1">((cache = checkWord(-</span><span class="s4">1</span><span class="s1">,</span><span class="s4">1</span><span class="s1">,iOrig,jOrig,crossword,word)) != </span><span class="s0">null</span><span class="s1">)</span>
                        <span class="s0">return </span><span class="s1">cache;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">return null</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">private static </span><span class="s1">Word checkWord(</span><span class="s0">int </span><span class="s1">dH, </span><span class="s0">int </span><span class="s1">dV, </span><span class="s0">int </span><span class="s1">iOrig, </span><span class="s0">int </span><span class="s1">jOrig, </span><span class="s0">int</span><span class="s1">[][] crossword, String word){</span>
        <span class="s2">// checks every word char-by-char in array, if every char is found = returns a Word with defined start and end points</span>
        <span class="s1">Word found;</span>
        <span class="s0">int </span><span class="s1">i = iOrig - dV;</span>
        <span class="s0">int </span><span class="s1">j = jOrig - dH;</span>

        <span class="s0">for </span><span class="s1">(</span><span class="s0">char </span><span class="s1">c : word.toCharArray()){</span>
            <span class="s0">if </span><span class="s1">(!(crossword[i + dV][j + dH] == c))</span>
                <span class="s0">return null</span><span class="s1">;</span>
            <span class="s1">i += dV;</span>
            <span class="s1">j += dH;</span>
        <span class="s1">}</span>
        <span class="s1">found = </span><span class="s0">new </span><span class="s1">Word(word);</span>
        <span class="s1">found.setStartPoint(jOrig, iOrig);</span>
        <span class="s1">found.setEndPoint(j, i);</span>

        <span class="s0">return </span><span class="s1">found;</span>
    <span class="s1">}</span>


    <span class="s0">public static class </span><span class="s1">Word {</span>
        <span class="s0">private </span><span class="s1">String text;</span>
        <span class="s0">private int </span><span class="s1">startX;</span>
        <span class="s0">private int </span><span class="s1">startY;</span>
        <span class="s0">private int </span><span class="s1">endX;</span>
        <span class="s0">private int </span><span class="s1">endY;</span>

        <span class="s0">public </span><span class="s1">Word(String text) {</span>
            <span class="s0">this</span><span class="s1">.text = text;</span>
        <span class="s1">}</span>

        <span class="s0">public void </span><span class="s1">setStartPoint(</span><span class="s0">int </span><span class="s1">i, </span><span class="s0">int </span><span class="s1">j) {</span>
            <span class="s1">startX = i;</span>
            <span class="s1">startY = j;</span>
        <span class="s1">}</span>

        <span class="s0">public void </span><span class="s1">setEndPoint(</span><span class="s0">int </span><span class="s1">i, </span><span class="s0">int </span><span class="s1">j) {</span>
            <span class="s1">endX = i;</span>
            <span class="s1">endY = j;</span>
        <span class="s1">}</span>

        <span class="s1">@Override</span>
        <span class="s0">public </span><span class="s1">String toString() {</span>
            <span class="s0">return </span><span class="s1">String.format(</span><span class="s3">&quot;%s - (%d, %d) - (%d, %d)&quot;</span><span class="s1">, text, startX, startY, endX, endY);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>
</pre>
</body>
</html>